<html lang="pl">
    <head>
        <title>OPGG</title>

        <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css" />
        <link rel="stylesheet" href="css/main.css" type="text/css" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
            crossorigin="anonymous"
        />
    </head>

    <body>
        <section class="bg-dark">
            <div class="container">
                <img src="" alt="" />
                <h1 class="name"></h1>
                <span class="tier"></span>&nbsp;<span class="rank"></span>
                <button style="max-width: 50px; max-height: 50px">CLICK ME</button>
            </div>
        </section>
        <a href="index.html">TRY AGAIN</a>

        <main class="container">
            <section class="bg-light row">
                <div class="col-4">
                    <div style="height: 200px"></div>
                    <div style="height: 200px"></div>
                </div>
                <div class="col-8">
                    <div style="height: 200px" class="row">
                        <div class="col-3"></div>
                        <div class="col-3"></div>
                        <div class="col-3"></div>
                        <div class="col-3"></div>
                    </div>
                    <div style="height: 200px">
                        <img src="" class="playericon" /><span class="playername"></span>
                        <img src="" class="playericon" /><span class="playername"></span>
                        <img src="" class="playericon" /><span class="playername"></span>
                        <img src="" class="playericon" /><span class="playername"></span>
                        <img src="" class="playericon" /><span class="playername"></span>
                        <img src="" class="playericon" /><span class="playername"></span>
                        <img src="" class="playericon" /><span class="playername"></span>
                        <img src="" class="playericon" /><span class="playername"></span>
                        <img src="" class="playericon" /><span class="playername"></span>
                        <img src="" class="playericon" /><span class="playername"></span>
                    </div>
                </div>
            </section>
        </main>
        <script>
            const urlParams = new URLSearchParams(window.location.search);
            console.log(urlParams.get("region"));

            console.log(urlParams.get("nickname"));

            document.querySelector("button").addEventListener("click", () => {
                console.log("JASHDKJAHSDa");
                const getData = async () => {
                    const response = await fetch("http://localhost:3005/get-data?name=" + urlParams.get("nickname"));
                    const data = await response.json();
                    console.log(data);
                    document.querySelector(".tier").innerText = data.tier ? data.tier : "NO TIER";
                    document.querySelector(".rank").innerText = data.rank ? data.rank : "NO TIER";
                    document.querySelector("img").src = data.profileIcon;
                    document.querySelectorAll(".playericon").forEach((player, index) => {
                        player.src = `http://ddragon.leagueoflegends.com/cdn/13.1.1/img/champion/${data.matchesWithData[0].info.participants[index].championName}.png`;
                    });
                    document.querySelectorAll(".playername").forEach((player, index) => {
                        player.src = `http://ddragon.leagueoflegends.com/cdn/13.1.1/img/champion/${data.matchesWithData[0].info.participants[index].championName}.png`;
                    });
                 
                //document.querySelector(".ally5").src = `http://ddragon.leagueoflegends.com/cdn/13.1.1/img/champion/${data.matchesWithData[0].info.participants[9].championName}.png`
                    document.querySelector(".mainName").innerText = data.matchesWithData[0].info.participants[9].summonerName;
                    document.querySelector(".name").innerText = data.name;
                    document.querySelector(".wins").innerText = data.wins;
                    document.querySelector(".losses").innerText = data.losses;

                    //document.querySelector(".matches").innerText = data.matches;
                };
                getData();
            });
        </script>

        <script src="js/skrypt.js" type="text/javascript"></script>
        <script src="js/bootstrap/bootstrap.bundle.min.js"></script>
    </body>
</html>
